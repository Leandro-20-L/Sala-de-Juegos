<div class="resultados-container">
  <h1>Resultados</h1>

  <button (click)="toggleVista()" class="boton-vista">
    {{ soloUsuario ? 'Ver todos los jugadores' : 'Ver solo mis resultados' }}
  </button>

  <div *ngIf="cargando" class="loading">Cargando resultados...</div>

  
  <ng-container *ngFor="let juego of juegos">
    <div *ngIf="!cargando && filtrarPorJuego(juego.nombre).length > 0">
      <h2 class="titulo-juego" [ngClass]="juego.clase">
        {{ juego.nombre }} ({{ filtrarPorJuego(juego.nombre).length }} resultados)
      </h2>

      <table class="tabla-resultados">
        <thead>
          <tr>
            <th>#</th>
            <th>Email</th>
            <th>Puntaje</th>
            <th>Resultado</th>
            <th>Fecha</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let r of filtrarPorJuego(juego.nombre); let i = index"
              [class]="obtenerClaseResultado(r.resultado)">
            <td>{{ i + 1 }}</td>
            <td>{{ r.email }}</td>
            <td>{{ r.puntaje }}</td>
            <td>{{ r.resultado }}</td>
            <td>{{ r.fecha_juego | date:'short' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </ng-container>

  <div *ngIf="!cargando && resultados.length === 0" class="sin-datos">
    No hay resultados registrados a√∫n.
  </div>
</div>
